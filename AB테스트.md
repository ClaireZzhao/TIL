# A/B 테스트
- 가설: 실험을 통해 확인하고 싶은 주장
- 실험집단/통제집단: 실험군을 어떤 기준으로 구분할지? 비율은 얼마나?
- 독립변수: 종속변수에 영향을 주는 변수
- 종속변수: 실험 결과를 측정하기 위해 사용하는 변수
- 통제변수: 실험 결과에 영향을 미칠 수 있기에 실험/통제집단에서 동등한 조건이 제공되어야 하는 변수

## 설정되어야 하는 것들: 
- 종속변수 현재치 / 목표치: 현재의 수치 및 기대하는 목표치
- 샘플 크기: 가설 검증을 위한 샘플의 크기(가설 검증을 위해 최소한으로 확보되어야 하는 샘플 크기가 갖춰져야 함)
- 실험 기간: 샘플 크기를 고려하여 잡아야하는 실험 진행 기간(검증을 위해 필요한 최소한의 시간만을 들여서 테스트를 진행할 것)

## 주의할 점:
- Sequential 형태로 A/B테스트를 진행하면 안 된다(시간이 통제되지 않으므로)
    - 꼭 필요해서 한다면 A-B-A 형태로 검증을 해야 함 
- 실험군/대조군 분리/샘플링은 user_id 홀짝?
    - 홀짝으로 분리했을 경우 두 샘플에 통제변수가 잘 관리되었는지 꼭 확인 필요
    - 실험이 끝난 뒤, A/A 테스트를 통해 한번 더 검증하는 것도 좋음

## 가설 검증을 위한 최소 샘플 크기는?
- https://www.optimizely.com/sample-size-calculator?conversion=3&effect=20&significance=95
- https://www.evanmiller.org/ab-testing/sample-size.html

## 실험 결과에 대한 판단을 어떻게 할 것인가?
- P value 
- 신뢰구간
- Effect Size
    - 배너 1의 구매전환율은 3%이고 배너 2의 구매전환율은 10%
    - P < 0.05 라고 해서 배너 2의 효과가 좋음으로 판단하였다.
    - 그런데 배너 1을 통해 발생한 매출은 10만원, 배너 2를 통해 발생한 매출은 5000원이라면?
- 분포
### AB테스트 결과를 해석할 때 p value 뿐 아니라, effect size 및 sample size도 고려해야 함

## step:
- 귀무가설을 세움 (두 집단(실험군과 대조군)의 차이가 없다고 가정하는 가설)
- P value < 0.05: 이런식으로 threshold를 정하고 결정함
    - 종속변수가 클릭했는지, 가입했는지, 구매했는지를 나타내는 범주형이라면?
        - 로지스틱회귀, 카이제곱
        - https://www.evanmiller.org/ab-testing/chi-squared.html
    - 종속변수가 클릭횟수, 결제금액과 같은 이산형이라면?
        - T Test
        - https://www.evanmiller.org/ab-testing/t-test.html

## Interference
- Indirect Connection
   - 두 개의 유저군이 잠재변수나 공유된 리소스로 인해 연결되어 있는 경우
- Direct Connection
   - 두 개의 유저군이 같은 소셜네트워크에 속하거나 물리적인 접점이 있는 경우

## Interference 해결책: Randomisation Unit 변경
- 지역단위로 랜덤화: 각 지역은 랜덤하게 실험군과 대조군에 할당되어야 함 
- 소셜네트워크 관점에서 간섭 가능도에 따라 네트워크 노드들의 클러스터를 구성할 수 있고 이 클러스터를 실험의 단위로 삼을 수 있음

## A/B 테스트에서 자수하는 실수
- 시간이 지남에 따라 변화하는지 확인 필요
   - 새 기능에 대한 얼리어답터 효과도 있어 이 때만을 체리피킹하면 안 됨
- A/B 테스트로 검증된 결과가 무한히 유효하지 않음
   - Seasonality, 경쟁자 등장 등 다양한 요소로 지속적으로 변화

### A/B 테스트를 하는데에 있어 정확한 트래킹을 하기 위한 설계, 로깅들이 필요합니다.

## Multi-Armed Bandit(MAB)란 탐색과 활용 간의 비용교환(Exploration - Exploitation Tradeoff)을 통해 각 안에 할당되는 트래픽을 지속적으로 조정하는 알고리즘임
- 우리가 플고 싶은 배너 A 혹은 배너 B가 효과가 좋다라는 문제는 어떻게 하면 성공 확률이 높을 배너를 빠르게 찾아내서 그 배너에 집중하냐 라는 문제로 치환됨
